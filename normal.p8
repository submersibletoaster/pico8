pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
light={64,64}

function _update60()
 
 if (btn(0)) light[1]-=1
 if (btn(1)) light[1]+=1
 if (btn(2)) light[2]-=1
 if (btn(3)) light[2]+=1
 
end

function _draw()
 cls() 
 pal()

 rectfill(0,0,127,127,1)
 pset(light[1],light[2],10)
 
 nspr(1,32,64,10)
 nspr(2,96,64,10)
 
 
end

function _init()
 block(96,64,10)
end
-->8
function block(x,y,col)
 palt(0,false)
 set_normal_pal(col)
 spr(1,x,y)
end

function nspr(s,x,y,col)
 palt(0,false)
 set_normal_pal(col)
 spr(s,x,y)
end

-->8
local pn={}
pn[10]={}
pn[10][0]={
    7,10, 9,
    10,10, 9,
    4, 4, 4
  }
pn[10][1]={
   10, 7,10,
    9,10, 9,
    4, 4, 4
  }
pn[10][2]={
   9,10, 7,
    9,10,10,
    4, 4, 9
  }
pn[10][4]={
   10, 9, 4,
    7,10, 4,
   10, 9, 4,
  }
pn[10][5]={
    9,10, 9,
   10, 7,10,
    9,10, 9
  }
pn[10][6]={
    4, 9,10,
    4,10, 7,
    4, 9,10
  }
pn[10][8]={
    9, 4, 4,
   10,10, 4,    
    7,10, 9
}
pn[10][9]={
    4, 4, 4, 
    9,10, 9,
   10, 7,10
  }
pn[10][10]={
    4, 4, 9,
    4,10,10,
    9,10, 7
  }


local scale=127/3
function set_normal_pal(col)
 local lx=max(0, min(light[1],127) )
 local ly=max(0, min(light[2],127) )
 local x= flr( lx / scale )
 local y= flr( ly / scale )

 local norm = x + (y*4)
 printh(tostr(x)..","..tostr(y))
 printh(tostr(norm))
 
 local i=1
 local ni={0,1,2,4,5,6,8,9,10}
 for n in all( pn[col][norm] ) do
  printh("\t"..tostr(ni[i]))
  pal(ni[i],n)
  i+=1
  
 end 

end
__gfx__
00000000011111120111111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000455555564011112600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700455555564401126600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000455555564440266600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000455555564448a66600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007004555555644899a6600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000045555556489999a600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000008999999a8999999a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
